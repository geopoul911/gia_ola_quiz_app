(this["webpackJsonpquiz-frontend"]=this["webpackJsonpquiz-frontend"]||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),s=a.n(l),i=(a(39),a(40),a(41),a(32)),c=a(3),o=a(2),u=function(e){var t=e.history,a=e.setUserToken;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"home"},r.a.createElement("section",null,r.a.createElement("h1",{className:"app-title"},"Quiz App"),r.a.createElement("div",{className:"auth-container"},r.a.createElement(c.b,{to:"/quiz",className:"auth-buttons",id:"play-button"},"Play"),r.a.createElement(c.b,{to:"/history",className:"auth-buttons",id:"history-button"},"History"),r.a.createElement("button",{onClick:function(){localStorage.removeItem("userToken"),a(null),t.push("/login")},className:"auth-buttons",id:"logout-button"},"Logout")))))},m=a(8),d=a(9),h=a(11),p=a(10),E=a(7),g=a.n(E),f={"Content-type":"Application/json"},b=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t=e.target.username.value,a=e.target.password.value;g()({method:"post",url:"http://localhost:8001/api/user/login/",headers:f,data:{email:t,password:a}}).then((function(e){var t=e.data.token;localStorage.setItem("userToken",t),n.props.setUserToken(t),n.props.history.push("/")})).catch((function(e){n.setState({msg:"Login Failed. Please verify email/password."})}))},n.state={msg:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("userToken")&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"base-container login-container",ref:this.props.containerRef},r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"form login-form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Email"),r.a.createElement("input",{type:"text",name:"username",placeholder:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"password"})),r.a.createElement("p",{className:"login-message"},this.state.msg),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{type:"submit",className:"btn"},"Login")),r.a.createElement(c.b,{to:"/register",className:"register-link",id:"register"},"New User?"))))}}]),a}(r.a.Component),v={"Content-type":"Application/json"},w=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t=e.target.username.value,a=e.target.password.value,r=e.target.name.value;g()({method:"post",url:"http://localhost:8001/api/user/register/",headers:v,data:{email:t,password:a,name:r}}).then((function(e){n.setState({msg:"Registration Successful. Redirecting to login page..."}),setTimeout((function(){n.props.setUserToken(null),n.props.history.push("/login")}),2e3)})).catch((function(e){n.setState({msg:"Registration Failed. Please verify input data."})}))},n.state={msg:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("userToken")&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"base-container login-container",ref:this.props.containerRef},r.a.createElement("h1",null,"Register"),r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"form login-form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Name"),r.a.createElement("input",{type:"text",name:"name",placeholder:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Email"),r.a.createElement("input",{type:"text",name:"username",placeholder:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"password"})),r.a.createElement("p",{className:"login-message"},this.state.msg),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{type:"submit",className:"btn"},"Submit")))))}}]),a}(r.a.Component),k=function(e){var t=e.quiz,a=t.quiztakers_set.useranswer_set,n=t.question_set.map((function(e){var t=a.find((function(t){return t.question==e.id}));return e.userAnswer=e.answer_set.find((function(e){return e.id==t.answer})).label,e.correctAnswer=e.answer_set.find((function(e){return e.is_correct})).label,e}));return t.questions=n,t},z=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.score;return r.a.createElement(n.Fragment,null,r.a.createElement("title",null,"Quiz App - Summary"),r.a.createElement("div",{className:"quiz-summary"},r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",{className:"mdi mdi-check-circle-outline success-icon"})),r.a.createElement("h1",null,"Quiz has ended"),r.a.createElement("div",{className:"container stats"},r.a.createElement("h2",null,"Your Score: ",e,"%")),r.a.createElement("section",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/"},"Back to Home")))))))}}]),a}(n.Component),q={"Content-type":"Application/json"},y=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleAnswerClick=function(e){var t=e.target.id,a=n.state.questions,r=n.state.currentQuestion,l=n.state.currentQuestionIndex;r.selectedAnswer=t,a[l]=r,n.setState({selectedAnswer:e.target.id,questions:a})},n.handleAnswerSubmit=function(e){q.Authorization="Token "+localStorage.getItem("userToken");var t=n.state.selectedAnswer,a=n.state.questions,r=n.state.currentQuestion.id,l=n.state.quizTakerId,s=n.state.currentQuestionIndex+1,i=n.state.slug,c=a[s];s<a.length?g()({method:"patch",url:"http://localhost:8001/api/quiz/save-answer/",headers:q,data:{quiztaker:l,question:r,answer:t}}).then((function(e){n.setState({currentQuestionIndex:s,currentQuestion:c,selectedAnswer:c.selectedAnswer})})):g()({method:"post",url:"http://localhost:8001/api/quiz/quizzes/".concat(i,"/submit/"),headers:q,data:{quiztaker:l,question:r,answer:t}}).then((function(e){n.setState({completed:!0,score:e.data.quiztaker_set.score})}))},n.handlePreviousNavigation=function(e){var t=n.state.currentQuestionIndex-1,a=n.state.questions[t];t>=0&&n.setState({currentQuestionIndex:t,currentQuestion:a,selectedAnswer:a.selectedAnswer})},n.handleHomeClick=function(){n.props.history.push("/")},n.state={questions:[],currentQuestionIndex:0,currentQuestion:{},selectedAnswer:null,quizTakerId:null,loaded:!1,noData:!1,slug:"",completed:!1,score:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;q.Authorization="Token "+localStorage.getItem("userToken"),g.a.get("http://localhost:8001/api/quiz/quizzes",{headers:q}).then((function(t){if(204!==t.status){var a=t.data;if(a&&a.quiz){var n=function(e){if(e){var t=e.quiz.quiztakers_set.useranswer_set;return e.quiz.question_set.map((function(e){return e.selectedAnswer=t.find((function(t){return e.id===t.question})).answer,e}))}return[]}(a),r=function(e){if(e){var t=e.last_question_id,a=e.quiz;if(!t)return 0;var n=a.question_set,r=n.findIndex((function(e){return e.id===t}))+1;return r<n.length?r:n.length-1}}(a),l=a.quiz.quiztakers_set.id;e.setState({questions:n,currentQuestionIndex:r,quizTakerId:l,currentQuestion:n[r],selectedAnswer:n[r].selectedAnswer,loaded:!0,slug:a.quiz.slug,noData:!1})}}else e.setState({loaded:!0,noData:!0})}))}},{key:"render",value:function(){if(this.state.completed)return r.a.createElement(z,{score:this.state.score});if(this.state.loaded&&this.state.noData)return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"questions"},r.a.createElement("h5",null,"You have completed all available quizzes.")),r.a.createElement("div",{className:"quiz-summary"},r.a.createElement("section",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/"},"Back to Home"))))));if(this.state.loaded){var e=this.state.questions[this.state.currentQuestionIndex],t=e.label,a=e.answer_set,l=this.state.currentQuestionIndex===this.state.questions.length-1,s=e.selectedAnswer;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"questions"},r.a.createElement("h5",null,t),r.a.createElement("div",{className:"answers-container"},r.a.createElement("p",{className:s&&s==a[0].id?"answer answer-selected":"answer",id:a[0].id,onClick:this.handleAnswerClick},a[0].label),r.a.createElement("p",{className:s&&s==a[2].id?"answer answer-selected":"answer",id:a[2].id,onClick:this.handleAnswerClick},a[2].label)),r.a.createElement("div",{className:"answers-container"},r.a.createElement("p",{className:s&&s==a[1].id?"answer answer-selected":"answer",id:a[1].id,onClick:this.handleAnswerClick},a[1].label),r.a.createElement("p",{className:s&&s==a[3].id?"answer answer-selected":"answer",id:a[3].id,onClick:this.handleAnswerClick},a[3].label)),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{className:"button-previous",onClick:this.handlePreviousNavigation},"Previous"),l?r.a.createElement("button",{onClick:this.handleAnswerSubmit,className:"button-next"},"Submit"):r.a.createElement("button",{onClick:this.handleAnswerSubmit,className:"button-next"},"Next"),r.a.createElement("button",{onClick:this.handleHomeClick,className:"button-home"},"Home"))))}return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"questions"},r.a.createElement("h5",null,"Loading Quiz...")))}}]),a}(n.Component),N={"Content-type":"Application/json"},A=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).rowClickHandler=function(e){g.a.get("http://localhost:8001/api/quiz/quizzes/"+e.slug,{headers:N}).then((function(e){n.setState({quizDetail:k(e.data),detailView:!0})}))},n.resetToMyQuizzes=function(){n.setState({detailView:!1})},n.state={quizzes:[],detailView:!1,quizDetail:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.Authorization="Token "+localStorage.getItem("userToken"),g.a.get("http://localhost:8001/api/quiz/my-quizzes",{headers:N}).then((function(t){e.setState({quizzes:t.data})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"quiz-summary container"},this.state.detailView?r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",{className:"mdi mdi-check-circle-outline success-icon"})),r.a.createElement("h1",null,this.state.quizDetail.name),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Question"),r.a.createElement("th",null,"My Answer"),r.a.createElement("th",null,"Correct Answer"),r.a.createElement("th",null,"Correct Percentage (%)"))),r.a.createElement("tbody",null,this.state.quizDetail.questions.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.label),r.a.createElement("td",null,e.userAnswer),r.a.createElement("td",null,e.correctAnswer),r.a.createElement("td",null,e.useranswer_percent))})))),r.a.createElement("section",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{onClick:this.resetToMyQuizzes},"Back to My Quizzes")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/"},"Back to Home"))))):r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",{className:"mdi mdi-check-circle-outline success-icon"})),r.a.createElement("h1",null,"Completed Quizzes"),r.a.createElement("table",{style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Quiz"),r.a.createElement("th",null,"My Score"),r.a.createElement("th",{style:{textAlign:"center"}},"Submission Rate Over 7 (%)"))),r.a.createElement("tbody",null,this.state.quizzes.map((function(t){return r.a.createElement("tr",{key:t.slug,onClick:function(){return e.rowClickHandler(t)}},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.score),r.a.createElement("td",null,t.threshold_rate))})))),r.a.createElement("section",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/"},"Back to Home")))))))}}]),a}(n.Component),S=a(33),C=function(e){var t=e.component,a=e.render,n=e.isLoggedIn,l=Object(S.a)(e,["component","render","isLoggedIn"]);return r.a.createElement(o.b,Object.assign({},l,{render:function(e){return!0===n?a?a(e):r.a.createElement(t,e):r.a.createElement(o.a,{to:{pathname:"/login"}})}}))};var j=function(){var e=Object(n.useState)(localStorage.getItem("userToken")),t=Object(i.a)(e,2),a=t[0],l=t[1];return r.a.createElement(c.a,null,r.a.createElement(o.d,null,!0!==!!a&&r.a.createElement(o.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(b,Object.assign({},e,{setUserToken:l}))}}),!0!==!!a&&r.a.createElement(o.b,{exact:!0,path:"/register",render:function(e){return r.a.createElement(w,Object.assign({},e,{setUserToken:l}))}}),r.a.createElement(C,{isLoggedIn:!!a,path:"/",exact:!0,render:function(e){return r.a.createElement(u,Object.assign({},e,{setUserToken:l}))}}),r.a.createElement(C,{isLoggedIn:!!a,path:"/quiz",exact:!0,component:y}),r.a.createElement(C,{isLoggedIn:!!a,path:"/summary",exact:!0,component:z}),r.a.createElement(C,{isLoggedIn:!!a,path:"/history",exact:!0,component:A})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.33b132b5.chunk.js.map